!function(t){function e(n){if(s[n])return s[n].exports;var o=s[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var s={};return e.m=t,e.c=s,e.p="",e(0)}([function(t,e,s){"use strict";var n=s(1),o=s(5),r=s(4),a=s(2);t.exports=n.createClass({displayName:"exports",propTypes:{tags:n.PropTypes.array,suggestions:n.PropTypes.oneOfType([n.PropTypes.array,n.PropTypes.func]),addKeys:n.PropTypes.array,removeKeys:n.PropTypes.array,upKey:n.PropTypes.number,downKey:n.PropTypes.number},getDefaultProps:function(){return{tags:[],addKeys:[13],removeKeys:[46,8],upKey:38,downKey:40,onChange:function(){}}},getInitialState:function(){return{tag:"",tags:this.props.tags,dropdownItems:[],inputWidth:50,selectedDropdownIndex:-1}},removeTag:function(t){for(var e=this.state.tags.slice(0),s=0;s<e.length;s++)if(e[s]===t)return e.splice(s,1),this.setState({tags:e}),void this.props.onChange(e,this.state.tags)},addTag:function(t){var e=this.state.tags.slice(0),s=t.trim();s.length>0&&e.push(t),this.setState({tags:e,tag:"",selectedDropdownIndex:-1,dropdownItems:[]}),this.calculateInputWidth(1),this.props.onChange(e,this.state.tags)},addSuggestion:function(t){this.addTag(this.state.dropdownItems[t])},onInputChange:function(t){this.setState({tag:t.target.value,selectedDropdownIndex:-1}),this.calculateInputWidth(t.target.value.length),this.getSuggestions(t.target.value)},onInputKeyDown:function(t){-1!=this.props.addKeys.indexOf(t.keyCode)&&this.addTag(-1==this.state.selectedDropdownIndex?this.state.tag:this.state.dropdownItems[this.state.selectedDropdownIndex]),-1!=this.props.removeKeys.indexOf(t.keyCode)&&0===this.refs.input.getDOMNode().selectionStart&&this.removeTag(this.state.tags[this.state.tags.length-1]),this.props.downKey==t.keyCode&&(t.preventDefault(),this.selectDropdownItem("down")),this.props.upKey==t.keyCode&&(t.preventDefault(),this.selectDropdownItem("up"))},onClick:function(t){"tag-filter"==t.target.className&&this.refs.input.getDOMNode().focus()},calculateInputWidth:function(t){var e=12*t,s=this.refs.container.getDOMNode().offsetWidth-20;this.setState({inputWidth:e>s?s:e})},selectDropdownItem:function(t){var e=this.state.selectedDropdownIndex;"down"==t&&e<this.state.dropdownItems.length-1&&e++,"up"==t&&e>0&&e--,this.setState({selectedDropdownIndex:e})},getSuggestions:function(t){t=t.toLowerCase();var e=typeof this.props.suggestions;if("object"===e){var s=this.props.suggestions.filter(function(e){return e.toLowerCase().indexOf(t)>-1}),n=s.sort(function(e,s){return e.toLowerCase().indexOf(t)>=s.toLowerCase().indexOf(t)});this.setState({dropdownItems:n})}"function"===e&&this.props.suggestions(t).then(function(t){this.setState({dropdownItems:t})}.bind(this))},getClasses:function(){return this.state.tag.length>1&&this.state.dropdownItems&&this.state.dropdownItems.length>0?"dropdown-open":"dropdown-closed"},render:function(){var t=this.state.tags.map(function(t){return n.createElement(o,{tag:t,remove:this.removeTag.bind(null,t)})}.bind(this));return n.createElement("div",{className:"tag-filter-container "+this.getClasses()},n.createElement("div",{className:"tag-filter",ref:"container",onClick:this.onClick},t,n.createElement(r,{ref:"input",value:this.state.tag,inputWidth:this.state.inputWidth,onChange:this.onInputChange,onKeyDown:this.onInputKeyDown})),n.createElement(a,{items:this.state.dropdownItems,selectedIndex:this.state.selectedDropdownIndex,onSelect:this.addSuggestion}))}})},function(t,e,s){t.exports=React},function(t,e,s){"use strict";var n=s(1),o=s(3);t.exports=n.createClass({displayName:"exports",render:function(){var t=[];return this.props.items&&(t=this.props.items.map(function(t,e){return n.createElement(o,{text:t,isSelected:this.props.selectedIndex==e,onSelect:this.props.onSelect.bind(null,e)})}.bind(this))),n.createElement("div",{className:"tag-filter-dropdown"},t)}})},function(t,e,s){"use strict";var n=s(1);t.exports=n.createClass({displayName:"exports",render:function(){var t=this.props.isSelected?"selected":"";return n.createElement("div",{className:"tag-filter-dropdown-item "+t,onClick:this.props.onSelect},this.props.text)}})},function(t,e,s){"use strict";var n=s(1);t.exports=n.createClass({displayName:"exports",render:function(){return n.createElement("input",{className:"tag-filter-input",style:{width:this.props.inputWidth},value:this.props.value,onChange:this.props.onChange,onKeyDown:this.props.onKeyDown})}})},function(t,e,s){"use strict";var n=s(1);t.exports=n.createClass({displayName:"exports",render:function(){var t=this.props.selected===!0?"selected":"";return n.createElement("span",{className:"tag-filter-node "+t},this.props.tag,n.createElement("a",{className:"fa fa-times tag-filter-node-remove",href:"javascript:;",onClick:this.props.remove}))}})}]);